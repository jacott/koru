{
  "koru/dom": {
    "id": "koru/dom/base",
    "subject": {
      "name": "Dom",
      "abstract": "Utilities for interacting with the\n[Document Object Model](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model)\n"
    },
    "methods": {
      "htmlToJson": {
        "test": "koru/dom/base test htmlToJson",
        "sig": "htmlToJson(node)",
        "intro": "Convert an `Element` to a plain `object`",
        "calls": [
          [
            [
              [
                "O",
                "<section class=\"greeting\" id=\"gId\" data-lang=\"en\"><ul><li><span>Hello</span></li><li>two</li></ul></section>"
              ]
            ],
            [
              "O",
              "{\"$data-lang\": 'en', class: 'greeting', id: 'gId', section: {ul: [{li: {span=Hello,...}}, {li: 'two'}]}}"
            ]
          ]
        ]
      },
      "h": {
        "test": "koru/dom/base test Dom.h",
        "sig": "h(body)",
        "intro": "Convert an `object` into a html node.\n\n`id` and `class` convert to attributes but other attributes\nmust be prefixed with a `$`.\n\nArray is used when multiple children.\nNon prefixed key is used for `tagName`.",
        "calls": [
          [
            [
              [
                "O",
                "{\"$data-lang\": 'en', class: 'greeting', id: 'gId', section: {ul: [{li: {span=Hello,...}}, {li: 'two'}]}}"
              ]
            ],
            [
              "O",
              "<section class=\"greeting\" id=\"gId\" data-lang=\"en\"><ul><li><span>Hello</span></li><li>two</li></ul></section>"
            ]
          ]
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/env!koru/dom/dom"
    ]
  },
  "koru/idle-check": {
    "id": "koru/idle-check",
    "subject": {
      "name": "IdleCheck",
      "abstract": "IdleCheck keeps count of usage and notifies when idle.\n"
    },
    "methods": {},
    "protoMethods": {
      "waitIdle": {
        "test": "koru/idle-check waitIdle test already Idle",
        "sig": "waitIdle(func)",
        "intro": "waitIdle waits until `this.count` drops to zero.",
        "calls": [
          {
            "body": "          const check = new IdleCheck();\n          check.waitIdle(v.stub = test.stub());\n          assert.called(v.stub);\n        ",
            "calls": [
              [
                [
                  [
                    "F",
                    "stub"
                  ]
                ]
              ]
            ]
          }
        ]
      }
    },
    "newInstance": {
      "test": "koru/idle-check test constructor",
      "sig": "constructor()",
      "intro": null,
      "calls": [
        [
          [],
          [
            "Oi",
            "{_count: 0, _waitIdle: null}",
            "koru/idle-check"
          ]
        ]
      ]
    },
    "properties": {
      "singleton": {
        "value": [
          "Oi",
          "{_count: 0, _waitIdle: null}",
          "koru/idle-check"
        ],
        "info": "The default `IdleCheck`. It is used by\n{#koru/web-server-factory} and\n{#koru/session/server-connection-factory}"
      }
    },
    "requires": [
      "koru/util"
    ]
  },
  "koru/main": {
    "id": "koru/main",
    "subject": {
      "name": "koru",
      "abstract": "Main koru module. Responsible for:\n\n* Fibers\n* Logging\n* Dependency tracking and load/unload manager\n* AppDir location"
    },
    "methods": {
      "onunload": {
        "test": "koru/main test onunload",
        "sig": "onunload(moduleOrId, callback)",
        "intro": "A wrapper around `module#onUnload`. see https://www.npmjs.com/package/yaajs",
        "calls": [
          {
            "body": "        const myModule = {id: 'myModule', onUnload: test.stub()};\n        const callback = {stop() {}};\n        koru.onunload(myModule, callback);\n        assert.calledWith(myModule.onUnload, callback.stop);\n      ",
            "calls": [
              [
                [
                  [
                    "O",
                    "{id: 'myModule', onUnload: => stub}"
                  ],
                  [
                    "O",
                    "{stop: => stop}"
                  ]
                ]
              ]
            ]
          },
          [
            [
              "koru/main-test",
              [
                "F",
                "stub"
              ]
            ]
          ]
        ]
      },
      "findPath": {
        "test": "koru/main test findPath",
        "sig": "findPath(start, goal)",
        "intro": "Finds shortest dependency path from one module to another\nmodule that it (indirectly) requires.\n\n@param start the module to start from\n@param goal the module to look for\n@returns {[Module,...]} from `start` to `goal`",
        "calls": [
          [
            [
              [
                "Oi",
                "{Module:koru/main-test}",
                "Module"
              ],
              [
                "Oi",
                "{Module:koru/util-base}",
                "Module"
              ]
            ],
            [
              "Oi",
              "[{Module:koru/main-test}, {Module:koru/util}, {Module:koru/util-base}]",
              "Array"
            ]
          ]
        ]
      },
      "isRequiredBy": {
        "test": "koru/main test isRequiredBy",
        "sig": "isRequiredBy(supplier, user)",
        "intro": "Test if `supplier` is required by `user`.\n\n@param supplier the module to look for\n@param user the module to start from\n@returns true if path found from user to supplier",
        "calls": [
          [
            [
              [
                "Oi",
                "{Module:koru/util-base}",
                "Module"
              ],
              [
                "Oi",
                "{Module:koru/main-test}",
                "Module"
              ]
            ],
            true
          ],
          [
            [
              [
                "Oi",
                "{Module:koru/main-test}",
                "Module"
              ],
              [
                "Oi",
                "{Module:koru/util-base}",
                "Module"
              ]
            ],
            false
          ]
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/env!koru/main",
      "koru/errors",
      "koru/util",
      "koru/yaajs-graph"
    ]
  },
  "koru/model/main": {
    "id": "koru/model/main",
    "subject": {
      "name": "Model",
      "abstract": "Object persistence manager. Defines application models."
    },
    "methods": {},
    "protoMethods": {},
    "properties": {
      "BaseModel": {
        "value": [
          "F",
          "BaseModel"
        ]
      }
    },
    "requires": [
      "koru/env!koru/model/main",
      "koru/main",
      "koru/model/map",
      "koru/model/query",
      "koru/model/register-observe-field",
      "koru/model/register-observe-id",
      "koru/model/validation",
      "koru/random",
      "koru/session/base",
      "koru/util"
    ]
  },
  "koru/model/main.BaseModel": {
    "id": "koru/model/main",
    "subject": {
      "name": "BaseModel",
      "abstract": "The base class for all models"
    },
    "methods": {
      "define": {
        "test": "koru/model/main BaseModel test using a class",
        "sig": "define({module, name, fields})",
        "intro": "Define and register a model.\n\n@param {Module} [module] needed to auto unload module when file changed\n@param {string} [name] name of model. Defaults to class name or derive from module name.\n@param {object} [fields] call defineFields with fields\n@returns {BaseModel} the model",
        "calls": [
          {
            "body": "          class TestModel extends BaseModel {\n            foo() {return this.name;}\n          }\n\n          TestModel.define({\n            module,\n            fields: {name: 'text'},\n          });\n\n          assert.same(Model.TestModel, TestModel);\n          assert.same(TestModel.name, 'TestModel'); // not all browsers support this\n          assert.same(TestModel.modelName, 'TestModel');\n\n          let tm = TestModel.create({name: 'my name'});\n\n          assert.same(tm.foo(), 'my name');\n        ",
            "calls": [
              [
                [
                  [
                    "O",
                    "{fields: {name: 'text'}, module: {Module:test-model}}"
                  ]
                ],
                [
                  "F",
                  "TestModel"
                ]
              ]
            ]
          }
        ]
      }
    },
    "protoMethods": {}
  },
  "koru/pg/driver": {
    "id": "koru/pg/driver",
    "subject": {
      "name": "pg",
      "abstract": "Interface to PostgreSQL.\n\n@config url The default url to connect to; see\n[pg-libpq](https://www.npmjs.com/package/pg-libpq), [libpq -\nPQconnectdb](http://www.postgresql.org/docs/9.4/interactive/libpq-connect.html)\n"
    },
    "methods": {
      "connect": {
        "test": "koru/pg/driver test connection",
        "sig": "connect(url, name)",
        "intro": "Create a new database Client connected to the `url`\n\n@param [name] The name to give to the connection. By default\nit is the schema name.",
        "calls": [
          [
            [
              "host=/var/run/postgresql dbname=korutest options='-c search_path=public,pg_catalog'"
            ],
            [
              "Oi",
              "Pg:host=/var/run/postgresql dbname=korutest options='-c search_path=public,pg_catalog'",
              "koru/pg/driver::Client"
            ]
          ],
          [
            [
              "postgresql://localhost/korutest",
              "conn2"
            ],
            [
              "Oi",
              "Pg:postgresql://localhost/korutest",
              "koru/pg/driver::Client"
            ]
          ]
        ]
      }
    },
    "protoMethods": {},
    "properties": {
      "defaultDb": {
        "calls": [
          [
            [],
            [
              "Oi",
              "Pg:host=/var/run/postgresql dbname=korutest",
              "koru/pg/driver::Client"
            ]
          ],
          [
            [],
            [
              "Oi",
              "Pg:host=/var/run/postgresql dbname=korutest",
              "koru/pg/driver::Client"
            ]
          ]
        ],
        "info": "Return the default Client database connection.\n"
      }
    },
    "requires": [
      "koru/main",
      "koru/make-subject",
      "koru/match",
      "koru/pool-server",
      "koru/util"
    ]
  },
  "koru/pg/driver::Client": {
    "id": "koru/pg/driver",
    "subject": {
      "name": "Client",
      "abstract": "A connection to a database.\n\nSee {#koru/pg/driver.connect}"
    },
    "methods": {},
    "protoMethods": {
      "jsFieldToPg": {
        "test": "koru/pg/driver test jsFieldToPg",
        "sig": "jsFieldToPg(col, type)",
        "intro": null,
        "calls": [
          [
            [
              "runs",
              "number"
            ],
            "\"runs\" double precision"
          ],
          [
            [
              "name"
            ],
            "\"name\" text"
          ],
          [
            [
              "dob",
              [
                "O",
                "{type: 'date'}"
              ]
            ],
            "\"dob\" date"
          ],
          [
            [
              "map",
              [
                "O",
                "{default: {treasure: 'lost'}, type: 'object'}"
              ]
            ],
            "\"map\" jsonb DEFAULT '{\"treasure\":\"lost\"}'::jsonb"
          ]
        ]
      }
    },
    "initExample": "          const Client = pg.defaultDb.constructor;\n        ",
    "initInstExample": "          const client = pg.defaultDb;\n        "
  },
  "koru/session/main": {
    "id": "koru/session/main",
    "subject": {
      "name": "session",
      "abstract": "The main or active session for client server communication.\nSee {#koru/session/web-socket-sender-factory}"
    },
    "methods": {
      "defineRpc": {
        "test": "koru/session/main test defining",
        "sig": "defineRpc(name, func)",
        "intro": "Define a remote proceedure call",
        "calls": [
          [
            [
              "Book.list",
              [
                "F",
                "func"
              ]
            ],
            [
              "M",
              "koru/session/base"
            ]
          ]
        ]
      }
    },
    "protoMethods": {},
    "properties": {
      "_id": {
        "value": "default",
        "info": "The session _id: \"default\""
      }
    },
    "requires": [
      "koru/env!koru/session/main",
      "koru/session/base"
    ]
  },
  "koru/session/publish-test-helper-server": {
    "id": "koru/session/publish-test-helper-server",
    "subject": {
      "name": "publishTH",
      "abstract": "Utilities to help test server publish/subscribe"
    },
    "methods": {
      "mockSession": {
        "test": "koru/session/publish-test-helper-server test mockSession",
        "sig": "mockSession(id=\"mock\")",
        "intro": "Create mock [Session](#koru/session/main)",
        "calls": [
          [
            [
              "myMockSession"
            ],
            [
              "O",
              "{_commands: {P: => subscribe}, _id: 'myMockSession', _rpcs: {}, globalDict: 'stubbedGlobalDict'}"
            ]
          ],
          [
            [],
            [
              "O",
              "{_commands: {P: => subscribe}, _id: 'mock', _rpcs: {}, globalDict: 'stubbedGlobalDict'}"
            ]
          ]
        ]
      },
      "mockConnection": {
        "test": "koru/session/publish-test-helper-server test mockConnection",
        "sig": "mockConnection(sessId, session=this.mockSession())",
        "intro": "Create mock\n[SeverConnection](#koru/session/server-connection-factory::ServerConnection)",
        "calls": [
          [
            [
              "s456",
              [
                "O",
                "{_commands: {P: => subscribe}, _id: 'mock', _rpcs: {}, globalDict: {index: 0, k2c: {}, c2k: [], limit: 65520}}"
              ]
            ],
            [
              "O",
              "{_last: null, _onClose: null, _session: {_id: 'mock', _rpcs: {}, _commands: {P: => subscribe}, globalDict: {index: 0, k2c: {}, c2k: [], limit: 65520}},}"
            ]
          ],
          [
            [],
            [
              "O",
              "{_last: null, _onClose: null, _session: {}, _subs: {}, _userId: 'u123', added: => stub, changed: => stub, close: => , match: {_models: undefined, has: }"
            ]
          ]
        ]
      },
      "mockSubscribe": {
        "test": "koru/session/publish-test-helper-server test mockSubscribe",
        "sig": "mockSubscribe(v, id, name, ...args)",
        "intro": "Simulate a client subscribing to a publication\n\n@param v a holder for test variables. Expects `v.session` to\nbe a mockSession. `v.conn` will be set to a `mockConnection`\nunless it already exists.\n@param id the id of the subscription\n@param name the name of the publication\n\n@param {object|primitive} [args] any arguments to send to the publication",
        "calls": [
          [
            [
              [
                "O",
                "{args: {author: 'Jane Austen'}, session: {_id: 'mock', _rpcs: {}, _commands: {P: => subscribe}, globalDict: {index: 0, k2c: {}, c2k: [], limit: 65520}}}"
              ],
              "s123",
              "Book",
              [
                "O",
                "{author: 'Jane Austen'}"
              ]
            ],
            [
              "O",
              "{_called: true, _matches: [], _subscribe: => stub, args: [{author: 'Jane Austen'}], conn: {ws: {send: => stub, on: => stub}, sessId: 's123', _subs: {s1}"
            ]
          ]
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/main",
      "koru/session/main",
      "koru/session/message",
      "koru/session/publish",
      "koru/session/server-connection-factory",
      "koru/test/main",
      "koru/util"
    ]
  },
  "koru/session/web-socket-sender-factory": {
    "id": "koru/session/web-socket-sender-factory",
    "subject": {
      "name": "webSocketSenderFactory",
      "abstract": "Build WebSocket clients (senders)."
    },
    "methods": {},
    "protoMethods": {},
    "newInstance": {
      "test": "koru/session/web-socket-sender-factory test initialization",
      "sig": "webSocketSenderFactory(session, sessState, execWrapper=koru.fiberConnWrapper, base=session)",
      "intro": "",
      "calls": [
        {
          "body": "        const mySession = webSocketSenderFactory(new SessionBase('foo'), stateFactory());\n        const wsConnection = {};\n        mySession.newWs = test.stub().returns(wsConnection);\n\n        mySession.connect();\n\n        assert.called(mySession.newWs);\n        assert.same(wsConnection.binaryType, 'arraybuffer');\n      ",
          "calls": [
            [
              [
                [
                  "O",
                  "{_commands: {}, _id: 'foo', _rpcs: {}}"
                ],
                [
                  "O",
                  "{_onConnect: {}, _resetPendingCount: => _resetPendingCount, _state: 'startup', close: => close, connected: => connected, constructor: => stateFactory, }"
                ]
              ],
              [
                "O",
                "{_broadcastFuncs: {}, _commands: {X: => , K: => ack, L: => load, U: => unload, W: => batchedMessages, B: => broadcast}, _id: 'foo', _rpcs: {}, _waitSen}"
              ]
            ]
          ]
        }
      ]
    },
    "requires": [
      "koru/main",
      "koru/session/message",
      "koru/util"
    ]
  },
  "koru/test/api": {
    "id": "koru/test/api",
    "subject": {
      "name": "API",
      "abstract": "API is a semi-automatic API document generator. It uses\nunit-tests to determine types and values at test time."
    },
    "methods": {
      "module": {
        "test": "koru/test/api test module",
        "sig": "module(subjectModule, subjectName, options)",
        "intro": "Initiate documentation of the module. Subsequent calls to API\nmethods will act of the given `module`.\n\n@param [subjectModule] defaults to the module corresponding\nto the current test module.\n@param [subjectName] defaults to a hopefully reasonable name\n@param [options] adornments to the documentation:\n\n* `initExample` - code that can be used to initialize\n`subject`\n* `initInstExample` - code that can be used to initialize\nan instance of `subject`",
        "calls": [
          [
            [],
            [
              "Os",
              "{API(API)}",
              "koru/test/api"
            ]
          ],
          [
            [
              [
                "O",
                "{exports: {clean: => clean}, id: 'myMod1'}"
              ],
              "myHelper",
              [
                "O",
                "{initExample: 'Init example', initInstExample: 'Init inst example'}"
              ]
            ],
            [
              "Oi",
              "{API(myHelper)}",
              "koru/test/api"
            ]
          ],
          [
            [
              [
                "O",
                "{exports: => Book, id: 'myMod2'}"
              ]
            ],
            [
              "Oi",
              "{API(Book)}",
              "koru/test/api"
            ]
          ]
        ]
      },
      "innerSubject": {
        "test": "koru/test/api test innerSubject",
        "sig": "innerSubject(subject, subjectName, options)",
        "intro": "Document a subject within a module.\n\n@param subject either the actual subject or the property name\nof the subject if accessible from the current subject\n@param [subjectName] override the subject name\n@param [options] adornments to the documentation:\n\n* `intro|info` - property info line (if subject is a `string`)\n* `abstract` - introduction to the subject. If abstract is a\n`function` then the initial doc comment is used.\n* `initExample` - code that can be used to initialize\n`subject`\n* `initInstExample` - code that can be used to initialize\nan instance of `subject`\n@returns an API instance for the given `subject`. Subsequent\nAPI calls should be made directly on this API instance and\n**not** the API Class itself",
        "calls": [
          [
            [
              [
                "O",
                "{anything: 'is allowed'}"
              ],
              "Anything can be documented",
              [
                "O",
                "{abstract: => abstract, initExample: 'const init = {sample: 'code'};', initInstExample: 'const inst = initCode();'}"
              ]
            ],
            [
              "Os",
              "{API(Anything can be documented)}",
              "koru/test/api"
            ],
            "hello"
          ],
          {
            "body": "        class Book {\n          constructor() {this._chapters = [];}\n          newChapter() {\n            const chapter = new this.constructor\n                    .Chapter(10);\n            this._chapters.push(chapter);\n            return chapter;\n          }\n        };\n        Book.Chapter = class {\n          constructor(startPage) {this.page = startPage;}\n          goto() {return this.page;}\n        };;\n\n        API.module({id: 'myMod1', exports: Book}, 'myHelper');\n        API.innerSubject('Chapter', null, {\n          info: 'Chapter info',\n        })\n          .protoMethod('goto');\n\n        const book = new Book();\n        const chapter = book.newChapter();\n        assert.same(chapter.goto(), 10);\n      ",
            "calls": [
              [
                [
                  "Chapter",
                  null,
                  [
                    "O",
                    "{info: 'Chapter info'}"
                  ]
                ],
                [
                  "Oi",
                  "{API(Chapter)}",
                  "koru/test/api"
                ]
              ]
            ]
          }
        ]
      },
      "example": {
        "test": "koru/test/api test example",
        "sig": "example(body)",
        "intro": "Run a section of as an example of a method call.",
        "calls": [
          [
            [
              [
                "F",
                "()"
              ]
            ]
          ],
          {
            "body": "        class Color {\n          static define(name, value) {\n            this.colors[name] = value;\n          }\n          // ...\n        }\n        Color.colors = {};\n\n        API.module({id: 'myMod', exports: Color});\n        API.method('define');\n\n        API.example(() => {\n          // this body of code is executed\n          Color.define('red', '#f00');\n          Color.define('blue', '#00f');\n          assert.same(Color.colors.red, '#f00');\n        });\n      ",
            "calls": [
              [
                [
                  [
                    "F",
                    "()"
                  ]
                ]
              ]
            ]
          }
        ]
      },
      "comment": {
        "test": "koru/test/api test comment",
        "sig": "comment(comment)",
        "intro": "Add a comment before the next example",
        "calls": [
          {
            "body": "        class Excercise {\n          static register(name, minutes) {}\n          begin() {}\n        }\n\n        API.module({id: 'myMod', exports: Excercise});\n        API.method('register');\n\n        API.comment('Optionally set the default duration');\n        Excercise.register('Jogging', 5); // This call gets the comment\n        Excercise.register('Skipping'); // This call get no comment\n      ",
            "calls": [
              [
                [
                  "Optionally set the default duration"
                ]
              ]
            ]
          }
        ]
      },
      "property": {
        "test": "koru/test/api property test value property",
        "sig": "property(name, options)",
        "intro": "Document a property of the current subject. The property\ncan be either plain value or a get/set function.\n\n@param [options] details about the property.\n\nWhen `object` can contain the following:\n\n* `info` (or `intro`): description of property\n* `properties`: document child properties\n\nWhen `function` should return an info `string`. The info\n`string` can contain `${value}` which will be substituted\nwith a description of the properties value.",
        "calls": [
          {
            "body": "          v.defaults = {\n            logger: function () {},\n            width: 800,\n            height: 600,\n            theme: {\n              name: 'light',\n              primaryColor: '#aaf'\n            }\n          };\n\n          API.module({id: 'myMod', exports: v.defaults}, 'defaults');\n          API.property('theme', {\n            info: 'The default theme',\n            properties: {\n              name: value => {\n                v.name = value;\n                return 'The theme name is ${value}';\n              },\n              primaryColor: 'The primary color is ${value}'\n            },\n          });\n          assert.same(v.name, 'light');\n\n          API.property('logger', value => {\n            v.logger = value;\n            return 'The default logger is ${value}';\n          });\n\n          assert.same(v.logger, v.defaults.logger);\n        ",
            "calls": [
              [
                [
                  "theme",
                  [
                    "O",
                    "{info: 'The default theme', properties: {name: => name, primaryColor: 'The primary color is ${value}'}}"
                  ]
                ]
              ],
              [
                [
                  "logger",
                  [
                    "F",
                    "value => {/*...*/}"
                  ]
                ]
              ]
            ]
          },
          [
            [
              "width"
            ],
            [
              "U",
              "undefined"
            ],
            "If no info supplied then the test description is used"
          ],
          {
            "body": "          const book = {\n            get title() {return this._title;},\n            set title(value) {this._title = value;},\n          };\n\n          API.module({id: 'myMod', exports: book}, 'Room');\n          API.property('title', {\n            info: 'Get/set the book title',\n          });\n          API.comment('sets title');\n          book.title = 'Room';\n          assert.same(book._title, 'Room');\n          assert.same(book.title, book._title);\n        ",
            "calls": [
              [
                [
                  "title",
                  [
                    "O",
                    "{info: 'Get/set the book title'}"
                  ]
                ]
              ]
            ]
          }
        ]
      },
      "protoProperty": {
        "test": "koru/test/api test protoProperty",
        "sig": "protoProperty(name, options)",
        "intro": "Document a property of the current subject's prototype. The\nproperty can be either plain value or a get/set function.\n\nSee {#.property}",
        "calls": [
          {
            "body": "        class Book {\n          constructor(pages) {\n            this.pages = pages;\n          }\n        }\n\n        API.module({id: 'myMod', exports: Book});\n        API.protoProperty('page', {info: 'The number of pages'});\n        const book = new Book(504);\n        assert.same(book.pages, 504);\n      ",
            "calls": [
              [
                [
                  "page",
                  [
                    "O",
                    "{info: 'The number of pages'}"
                  ]
                ]
              ]
            ]
          }
        ]
      },
      "new": {
        "test": "koru/test/api test new",
        "sig": "new(sig)",
        "intro": "Document `constructor` for the current subject\n\n@param [sig] override the call signature\n@returns a ProxyClass which is to be used instead of `new Class`",
        "calls": [
          [
            [],
            [
              "F",
              "newProxy"
            ]
          ]
        ]
      },
      "method": {
        "test": "koru/test/api test method",
        "sig": "method(methodName)",
        "intro": "Document `methodName` for the current subject",
        "calls": [
          [
            [
              "fnord"
            ]
          ]
        ]
      },
      "protoMethod": {
        "test": "koru/test/api test protoMethod",
        "sig": "protoMethod(methodName, subject)",
        "intro": "Document prototype `methodName` for the current subject",
        "calls": [
          {
            "body": "        class Tree {\n          constructor(name) {\n            this.name = name;\n            this.branches = 10;\n          }\n\n          prune(branchCount) {\n            return this.branches -= branchCount;\n          }\n        };\n\n        API.module({id: 'myMod', exports: Tree});\n        API.protoMethod('prune');\n\n        const plum = new Tree('Plum');\n        assert.same(plum.prune(3), 7);\n        assert.same(plum.prune(2), 5);\n      ",
            "calls": [
              [
                [
                  "prune"
                ]
              ]
            ]
          }
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/env!koru/test/api",
      "koru/main",
      "koru/parse/js-parser",
      "koru/test/main",
      "koru/util"
    ]
  },
  "koru/util": {
    "id": "koru/util-base",
    "subject": {
      "name": "util",
      "abstract": null
    },
    "methods": {
      "mergeNoEnum": {
        "test": "koru/util-base test mergeNoEnum",
        "sig": "mergeNoEnum(dest, source)",
        "intro": "Merge `source` into `dest` but do not set `enumerable` on the\ndescriptor.\n",
        "calls": [
          {
            "body": "        const foo = {bar: 1};\n\n        sut.mergeNoEnum(foo, {\n          baz: 2,\n\n          get fnord() {return 3},\n        });\n\n        assert.equals(Object.keys(foo), ['bar']);\n        assert.same(foo.baz, 2);\n        assert.same(foo.fnord, 3);\n      ",
            "calls": [
              [
                [
                  [
                    "O",
                    "{bar: 1}"
                  ],
                  [
                    "O",
                    "{baz: 2, fnord: 3}"
                  ]
                ],
                [
                  "O",
                  "{bar: 1}"
                ]
              ]
            ]
          }
        ]
      },
      "merge": {
        "test": "koru/util-base test merge",
        "sig": "merge(dest, source)",
        "intro": "Merge `source` into `dest`.\n\n@alias extend deprecated",
        "calls": [
          [
            [
              [
                "O",
                "{}"
              ],
              [
                "O",
                "{a: 1, b: 2}"
              ]
            ],
            [
              "O",
              "{a: 1, b: 2}"
            ]
          ],
          [
            [
              [
                "O",
                "{a: 1}"
              ]
            ],
            [
              "O",
              "{a: 1}"
            ]
          ],
          [
            [
              [
                "O",
                "{a: 1, b: 2}"
              ],
              [
                "O",
                "{b: 3, c: 4}"
              ]
            ],
            [
              "O",
              "{a: 1, b: 3, c: 4}"
            ]
          ]
        ]
      },
      "toDp": {
        "test": "koru/util test toDp",
        "sig": "toDp(number, dp, zeroFill)",
        "intro": "Return a floating point `number` as a string to\n`dp` decimal places.\n\n@param {boolean} zeroFill - pad with zeros.",
        "calls": [
          [
            [
              10.7,
              0
            ],
            "11"
          ],
          [
            [
              2.6,
              1
            ],
            "2.6"
          ],
          [
            [
              1.2345,
              3,
              true
            ],
            "1.235"
          ],
          [
            [
              1.2,
              3,
              true
            ],
            "1.200"
          ],
          [
            [
              10,
              3
            ],
            "10"
          ]
        ]
      },
      "pc": {
        "test": "koru/util test pc",
        "sig": "pc(fraction)",
        "intro": "Convert a `fraction` into css % string",
        "calls": [
          [
            [
              1.2345678
            ],
            "123.45678%"
          ]
        ]
      },
      "px": {
        "test": "koru/util test px",
        "sig": "px(value)",
        "intro": "Convert a `fraction` into css % string",
        "calls": [
          [
            [
              123.2345678
            ],
            "123px"
          ]
        ]
      },
      "removeItem": {
        "test": "koru/util test removeItem",
        "sig": "removeItem(list, item)",
        "intro": "remove an `item` from a `list`. `list` is modified.\n\n\n@param item - can be a key-value object to compare the given keys.\n@returns {object|primitive} the removed item.",
        "calls": [
          [
            [
              [
                "Oi",
                "[]",
                "Array"
              ],
              2
            ],
            2
          ],
          [
            [
              [
                "Oi",
                "[]",
                "Array"
              ],
              4
            ]
          ],
          [
            [
              [
                "Oi",
                "[]",
                "Array"
              ],
              1
            ],
            1
          ],
          [
            [
              [
                "Oi",
                "[]",
                "Array"
              ],
              3
            ],
            3
          ],
          [
            [
              [
                "Oi",
                "[]",
                "Array"
              ]
            ]
          ],
          [
            [
              [
                "Oi",
                "[{x: 1}]",
                "Array"
              ],
              [
                "O",
                "{name: 'bar', x: 1}"
              ]
            ]
          ],
          [
            [
              [
                "Oi",
                "[{x: 1}]",
                "Array"
              ],
              [
                "O",
                "{name: 'bar'}"
              ]
            ],
            [
              "O",
              "{id: 5, name: 'bar'}"
            ]
          ],
          [
            [
              [
                "Oi",
                "[{x: 1}]",
                "Array"
              ],
              [
                "O",
                "{id: 4, name: 'foo'}"
              ]
            ],
            [
              "O",
              "{id: 4, name: 'foo'}"
            ]
          ]
        ]
      },
      "intersectp": {
        "test": "koru/util test intersectp",
        "sig": "intersectp(list1, list2)",
        "intro": "Determine if `list1` and `list2` intersect",
        "calls": [
          [
            [
              [
                "Oi",
                "[1, 4]",
                "Array"
              ],
              [
                "Oi",
                "[4, 5]",
                "Array"
              ]
            ],
            true
          ],
          [
            [
              [
                "Oi",
                "[1, 2]",
                "Array"
              ],
              [
                "Oi",
                "['a']",
                "Array"
              ]
            ],
            false
          ]
        ]
      },
      "reverseForEach": {
        "test": "koru/util test reverseForEach",
        "sig": "reverseForEach(list, visitor)",
        "intro": "Visit `list` in reverse order.\n\n@param visitor - called with the list `item` and `index`",
        "calls": [
          {
            "body": "        var results = [];\n        util.reverseForEach(v.list = [1,2,3], (val, index) => {\n          results.push(val+\".\"+index);\n        });\n        assert.equals(results, ['3.2', '2.1', '1.0']);\n\n        // ignores null list\n        util.reverseForEach(null, v.stub = test.stub());\n        refute.called(v.stub);\n      ",
            "calls": [
              [
                [
                  [
                    "Oi",
                    "[1, 2, 3]",
                    "Array"
                  ],
                  [
                    "F",
                    "(val, index)"
                  ]
                ]
              ],
              [
                [
                  null,
                  [
                    "F",
                    "stub"
                  ]
                ]
              ]
            ]
          }
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/match",
      "koru/stacktrace",
      "koru/util-base"
    ]
  },
  "koru/web-server": {
    "id": "koru/web-server",
    "subject": {
      "name": "webServer",
      "abstract": "The default web-server created from {#koru/web-server-factory}.\n{#koru/idle-check} is used to keep track of active\nrequests.\n\n@config host listen on the specified address\n@config port listen on the specified port\n@config defaultPage defaults to `/index.html`: used when no path\nis supplied in the url.\n@config index.js the file to serve for `index.js` or\n`require.js`; defaults to `yaajs.js`\n@config require.js alias for `index.js`\n@config koru where to find koru files; defaults to `app/koru`\n"
    },
    "methods": {
      "start": {
        "test": "koru/web-server test usage",
        "sig": "start()",
        "intro": null,
        "calls": [
          {
            "body": "        const {Server} = requirejs.nodeRequire('http');\n\n        const listen = test.stub(Server.prototype, 'listen').yields();\n        webServer.start();\n        assert.calledWith(listen, webServerModule.config().port);\n      ",
            "calls": [
              [
                []
              ]
            ]
          }
        ]
      }
    },
    "protoMethods": {},
    "requires": [
      "koru/main",
      "koru/web-server-factory"
    ]
  },
  "koru/web-server-factory": {
    "id": "koru/web-server-factory",
    "subject": {
      "name": "WebServerFactory",
      "abstract": "Factory for creating web-servers.\n"
    },
    "methods": {},
    "protoMethods": {
      "start": {
        "test": "koru/web-server-factory test start",
        "sig": "start()",
        "intro": null,
        "calls": [
          {
            "body": "        const {Server} = requirejs.nodeRequire('http');\n        const listen = test.stub(Server.prototype, 'listen').yields();\n\n        v.webServer.start();\n        assert.calledWith(listen, '9876', 'localhost');\n      ",
            "calls": [
              [
                []
              ]
            ]
          }
        ]
      },
      "stop": {
        "test": "koru/web-server-factory test stop",
        "sig": "stop()",
        "intro": null,
        "calls": [
          {
            "body": "        const {Server} = requirejs.nodeRequire('http');\n        const close = test.stub(Server.prototype, 'close');\n\n        v.webServer.stop();\n        assert.called(close);\n      ",
            "calls": [
              [
                []
              ]
            ]
          }
        ]
      }
    },
    "newInstance": {
      "test": "koru/web-server-factory test construction",
      "sig": "constructor(host, port, root, DEFAULT_PAGE='/index.html', SPECIALS={})",
      "intro": "Create a new web server. The npm package\n[send](https://www.npmjs.com/package/send) is used to serve\nfiles.\n\n@param root Serve files relative to path.",
      "calls": [
        {
          "body": "        const http = requirejs.nodeRequire('http');\n        test.stub(http, 'createServer');\n        v.webServer = WebServerFactory('0.0.0.0', '80', '/rootDir/',\n                                           '/index2.html',\n                                           {gem(match) {return [match[0], '/path-to-gems']}});\n        assert.calledWith(http.createServer, v.webServer.requestListener);\n      ",
          "calls": [
            [
              [
                "0.0.0.0",
                "80",
                "/rootDir/",
                "/index2.html",
                [
                  "O",
                  "{gem: => gem}"
                ]
              ],
              [
                "O",
                "{_replaceSend: => _replaceSend, compilers: {}, deregisterHandler: => deregisterHandler, getHandler: => getHandler, notFound: => notFound, parseUrlParam}"
              ]
            ]
          ]
        },
        [
          [
            "localhost",
            "9876",
            "/"
          ],
          [
            "O",
            "{_replaceSend: => _replaceSend, compilers: {}, deregisterHandler: => deregisterHandler, getHandler: => getHandler, notFound: => notFound, parseUrlParam}"
          ]
        ]
      ]
    },
    "requires": [
      "koru/fs-tools",
      "koru/idle-check",
      "koru/main",
      "koru/queue",
      "koru/util"
    ]
  }
}