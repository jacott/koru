<!DOCTYPE html>

<!--
    Material Design Lite
    Copyright 2015 Google Inc. All rights reserved.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License
  -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Koru API</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.blue_grey-deep_purple.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="api.css">
  </head>
  <body class="mdl-demo mdl-color-text--grey-700 mdl-base">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
                mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <div class="page-header" data-api="header">
          </div>
          <div class="mdl-layout-spacer"></div>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                      mdl-textfield--floating-label mdl-textfield--align-right">
            <label class="mdl-button mdl-js-button mdl-button--icon" for="fixed-header-drawer-exp">
              <i class="material-icons">search</i>
            </label>
            <div class="mdl-textfield__expandable-holder">
              <input class="mdl-textfield__input" type="text" name="sample" id="fixed-header-drawer-exp">
            </div>
          </div>
        </div>
      </header>
      <div class="mdl-layout__drawer">
        <span class="mdl-layout-title">Modules</span>
        <nav class="mdl-navigation" data-api="links">
        <a class="jsdoc-idLink" href="#koru/css/loader">koru/css/loader</a><a class="jsdoc-idLink" href="#koru/idle-check">koru/idle-check</a><a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a><a class="jsdoc-idLink" href="#koru/ui/route">koru/ui/route</a><a class="jsdoc-idLink" href="#koru/util">koru/util</a><a class="jsdoc-idLink" href="#koru/web-server">koru/web-server</a></nav>
      </div>
      <main class="mdl-layout__content">
        <div class="page-content" data-api="pages">
        <section id="koru/css/loader"><h2>CssLoader</h2><abstract><div></div></abstract><div><div><h4>Methods</h4><div><div><h5>CssLoader.loadAll(dir)</h5><abstract><div>Load all css and less files under <span class="jsdoc-param">dir</span></div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>dir</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const CssLoader = require('<a class="jsdoc-idLink" href="#koru/css/loader">koru/css/loader</a>');</div><div><div class="jsdoc-example-call"><span>CssLoader.loadAll("koru/css");</span></div></div></pre></div></div></div></div></div></section><section id="koru/idle-check"><h2>IdleCheck</h2><abstract><div>IdleCheck keeps count of usage and notifies when idle. </div></abstract><div><div><h5>constructor()</h5><abstract><div></div></abstract><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const IdleCheck = require('<a class="jsdoc-idLink" href="#koru/idle-check">koru/idle-check</a>');</div><div>new IdleCheck();</div></pre></div></div><div><h5>Properties</h5><table><tbody><tr><td>singleton</td><td><div>The default <span class="jsdoc-param">IdleCheck</span>. It is used by <a class="jsdoc-idLink" href="#koru/web-server-factory">koru/web-server-factory</a> and <a class="jsdoc-idLink" href="#session/server-connection">session/server-connection</a></div></td></tr></tbody></table></div><div><h4>Methods</h4><div><div><h5>IdleCheck#waitIdle(func)</h5><abstract><div>waitIdle waits until <span class="jsdoc-param">this.count</span> drops to zero.</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>func</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const IdleCheck = require('<a class="jsdoc-idLink" href="#koru/idle-check">koru/idle-check</a>');</div><div><div>const check = new IdleCheck();<br>check.waitIdle(v.stub = test.stub());<br>assert.called(v.stub);</div></div></pre></div></div></div></div></div></section><section id="koru/test/api"><h2>API</h2><abstract><div>API is a semi-automatic API document generator. It uses
unit-tests to determine types and values at test time.</div></abstract><div><div><h4>Methods</h4><div><div><h5>API.module(subject, subjectName, subjectModules)</h5><abstract><div>Specify the <span class="jsdoc-param">subject</span> to be documented</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>[subject]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></td><td></td></tr><tr class="jsdoc-arg"><td>[subjectName]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr><tr class="jsdoc-arg"><td>[subjectModules]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/">[module,...]</a></td><td>list of modules that define the subject</td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div class="jsdoc-example-call"><span>API.module();</span><span class="jsdoc-returns"> // returns {API(API)}</span></div></div><div><div class="jsdoc-example-call"><span>API.module({clean: =&gt; clean}, "myHelper");</span><span class="jsdoc-returns"> // returns {API(myHelper)}</span></div></div><div><div class="jsdoc-example-call"><span>API.module(Elf);</span><span class="jsdoc-returns"> // returns {API(Elf)}</span></div></div></pre></div></div><div><h5>API.example(body)</h5><abstract><div>Run a section of as an example of a method call.</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>body</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div class="jsdoc-example-call"><span>API.example(body);</span></div></div><div><div>class Color {<br>  static define(name, value) {<br>    this.colors[name] = value;<br>  }<br>  // ...<br>}<br>Color.colors = {};<br><br>API.module(Color);<br>API.method('define');<br><br>API.example(() =&gt; {<br>  // this body of code is executed<br>  Color.define('red', '#f00');<br>  Color.define('blue', '#00f');<br>  assert.same(Color.colors.red, '#f00');<br>});</div></div></pre></div></div><div><h5>API.comment(comment)</h5><abstract><div>Add a comment before the next example</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>comment</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div>class Excercise {<br>  static register(name, minutes) {}<br>  begin() {}<br>}<br><br>API.module(Excercise);<br>API.method('register');<br><br>API.comment('Optionally set the default duration');<br>Excercise.register('Jogging', 5); // This call gets the comment<br>Excercise.register('Skipping'); // This call get no comment</div></div></pre></div></div><div><h5>API.property(name, options)</h5><abstract><div>Document a property of the current subject</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>name</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr><tr class="jsdoc-arg"><td>[options]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div>v.defaults = {<br>  logger: function () {},<br>  width: 800,<br>  height: 600,<br>  theme: {<br>    name: 'light',<br>    primaryColor: '#aaf'<br>  }<br>};<br><br>API.module(v.defaults, 'defaults');<br>API.property('theme', {<br>  info: 'The default theme',<br>  properties: {<br>    name: value =&gt; {<br>      v.name = value;<br>      return 'The theme name is ${value}';<br>    },<br>    primaryColor: 'The primary color is ${value}'<br>  }<br>});<br>assert.same(v.name, 'light');<br><br>API.property('logger', value =&gt; {<br>  v.logger = value;<br>  return 'The default logger is ${value}';<br>});<br><br>assert.same(v.logger, v.defaults.logger);</div></div><div><div class="jsdoc-example-call"><span>API.property("width");</span></div></div></pre></div></div><div><h5>API.new()</h5><abstract><div>Document <span class="jsdoc-param">constructor</span> for the current subject</div></abstract><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div class="jsdoc-example-call"><span>API.new();</span><span class="jsdoc-returns"> // returns newProxy</span></div></div></pre></div></div><div><h5>API.method(methodName)</h5><abstract><div>Document <span class="jsdoc-param">methodName</span> for the current subject</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>methodName</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div class="jsdoc-example-call"><span>API.method("fnord");</span></div></div></pre></div></div><div><h5>API.protoMethod(methodName)</h5><abstract><div>Document prototype <span class="jsdoc-param">methodName</span> for the current subject</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>methodName</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const API = require('<a class="jsdoc-idLink" href="#koru/test/api">koru/test/api</a>');</div><div><div>class Tree {<br>  constructor(name) {<br>    this.name = name;<br>    this.branches = 10;<br>  }<br><br>  prune(branchCount) {<br>    return this.branches -= branchCount;<br>  }<br>};<br><br>API.module(Tree);<br>API.protoMethod('prune');<br><br>const plum = new Tree('Plum');<br>assert.same(plum.prune(3), 7);<br>assert.same(plum.prune(2), 5);</div></div></pre></div></div></div></div></div></section><section id="koru/ui/route"><h2>Route</h2><abstract><div>Route is a paginging system within a one page app. It manages
creating and destroying pages and recording history.</div></abstract><div><div><h4>Methods</h4><div><div><h5>Route.setTitle(title)</h5><abstract><div>Set the <span class="jsdoc-param">document.title</span> for the current page.</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>title</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const Route = require('<a class="jsdoc-idLink" href="#koru/ui/route">koru/ui/route</a>');</div><div><div class="jsdoc-example-call"><span>Route.setTitle("my title");</span></div></div></pre></div></div></div></div></div></section><section id="koru/util"><h2>util</h2><abstract><div>The util module provides commonly performed utility functions.</div></abstract><div><div><h4>Methods</h4><div><div><h5>util.toDp(number, dp, zeroFill)</h5><abstract><div>Return a floating point <span class="jsdoc-param">number</span> as a string to <span class="jsdoc-param">dp</span> decimal places.</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>number</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></td><td></td></tr><tr class="jsdoc-arg"><td>dp</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></td><td></td></tr><tr class="jsdoc-arg"><td>[zeroFill]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></td><td>pad with zeros.</td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div class="jsdoc-example-call"><span>util.toDp(10.7, 0);</span><span class="jsdoc-returns"> // returns "11"</span></div></div><div><div class="jsdoc-example-call"><span>util.toDp(2.6, 1);</span><span class="jsdoc-returns"> // returns "2.6"</span></div></div><div><div class="jsdoc-example-call"><span>util.toDp(1.2345, 3, true);</span><span class="jsdoc-returns"> // returns "1.235"</span></div></div><div><div class="jsdoc-example-call"><span>util.toDp(1.2, 3, true);</span><span class="jsdoc-returns"> // returns "1.200"</span></div></div><div><div class="jsdoc-example-call"><span>util.toDp(10, 3);</span><span class="jsdoc-returns"> // returns "10"</span></div></div></pre></div></div><div><h5>util.pc(fraction)</h5><abstract><div>Convert a <span class="jsdoc-param">fraction</span> into css % string</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>fraction</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div class="jsdoc-example-call"><span>util.pc("1.2345678");</span><span class="jsdoc-returns"> // returns "123.45678%"</span></div></div></pre></div></div><div><h5>util.px(value)</h5><abstract><div>Convert a <span class="jsdoc-param">fraction</span> into css % string</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>value</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div class="jsdoc-example-call"><span>util.px("123.2345678");</span><span class="jsdoc-returns"> // returns "123px"</span></div></div></pre></div></div><div><h5>util.removeItem(list, item)</h5><abstract><div>remove an <span class="jsdoc-param">item</span> from a <span class="jsdoc-param">list</span>. <span class="jsdoc-param">list</span> is modified.
<p>Returns </p>
<span class="jsdoc-param">item</span> if found</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>list</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></td><td></td></tr><tr class="jsdoc-arg"><td>[item]</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></td><td>can be a key-value object to compare the given keys.</td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div class="jsdoc-example-call"><span>util.removeItem([1, 2, 3], 2);</span><span class="jsdoc-returns"> // returns 2</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([1, 3], 4);</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([1, 3], 1);</span><span class="jsdoc-returns"> // returns 1</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([3], 3);</span><span class="jsdoc-returns"> // returns 3</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([]);</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([{id: 4, name: 'foo'}, {id: 5, name: 'bar'}, {x: 1}], {name: 'bar', x: 1});</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([{id: 4, name: 'foo'}, {id: 5, name: 'bar'}, {x: 1}], {name: 'bar'});</span><span class="jsdoc-returns"> // returns {id: 5, name: 'bar'}</span></div></div><div><div class="jsdoc-example-call"><span>util.removeItem([{id: 4, name: 'foo'}, {x: 1}], {id: 4, name: 'foo'});</span><span class="jsdoc-returns"> // returns {id: 4, name: 'foo'}</span></div></div></pre></div></div><div><h5>util.intersectp(list1, list2)</h5><abstract><div>Determine if <span class="jsdoc-param">list1</span> and <span class="jsdoc-param">list2</span> intersect</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>list1</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></td><td></td></tr><tr class="jsdoc-arg"><td>list2</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></td><td></td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div class="jsdoc-example-call"><span>util.intersectp([1, 4], [4, 5]);</span><span class="jsdoc-returns"> // returns true</span></div></div><div><div class="jsdoc-example-call"><span>util.intersectp([1, 2], ['a']);</span></div></div></pre></div></div><div><h5>util.reverseForEach(list, visitor)</h5><abstract><div>Visit <span class="jsdoc-param">list</span> in reverse order.</div></abstract><div class="jsdoc-args"><h6>Parameters</h6><table><tbody><tr class="jsdoc-arg"><td>list</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></td><td></td></tr><tr class="jsdoc-arg"><td>visitor</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></td><td>called with the list &lt;item&gt; and &lt;index&gt;</td></tr></tbody></table></div><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const util = require('<a class="jsdoc-idLink" href="#koru/util">koru/util</a>');</div><div><div>var results = [];<br>util.reverseForEach(v.list = [1, 2, 3], (val, index) =&gt; {<br>  results.push(val + "." + index);<br>});<br>assert.equals(results, ['3.2', '2.1', '1.0']);<br><br>// ignores null list<br>util.reverseForEach(null, v.stub = test.stub());<br>refute.called(v.stub);</div></div></pre></div></div></div></div></div></section><section id="koru/web-server"><h2>webServer</h2><abstract><div>The default web-server created from <a class="jsdoc-idLink" href="#koru/web-server-factory">koru/web-server-factory</a>.  <a class="jsdoc-idLink" href="#koru/idle-check">koru/idle-check</a> is used to
keep track of active requests.
<h4 id="config">Config</h4>
<ul>
<li><code>{host, port}</code>: listens on the specified address.</li>
<li><code>{defaultPage} defaults to</code>/index.html`: used when no path is
supplied in the url.</li>
<li><code>{index.js, require.js}</code> defaults to <code>yaajs.js</code>: the file to serve for</li>
<li><code>index.js</code> or <code>require.js</code></li>
<li><code>{koru}</code> defaults to <code>app/koru</code>: where to find koru files. </li>
</ul>
</div></abstract><div><div><h4>Methods</h4><div><div><h5>webServer.start()</h5><abstract><div></div></abstract><div><h6>Example</h6><pre class="jsdoc-example"><div class="jsdoc-require">const webServer = require('<a class="jsdoc-idLink" href="#koru/web-server">koru/web-server</a>');</div><div><div>const { Server } = requirejs.nodeRequire('http');<br><br>const listen = test.stub(Server.prototype, 'listen').yields();<br>webServer.start();<br>assert.calledWith(listen, webServerModule.config().port);</div></div></pre></div></div></div></div></div></section></div>
      </main>
    </div>
    <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
  </body>
</html>
